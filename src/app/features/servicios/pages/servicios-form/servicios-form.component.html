<main class="max-w-5xl mx-auto px-6">
  <!-- Page head -->
  <div class="pt-7 pb-2">
    <h1 class="text-3xl text-[#0a3d62] font-semibold mb-1">
      {{ isEdit ? 'Editar servicio' : 'Nuevo servicio' }}
    </h1>
    <p class="text-gray-600">Completa los detalles del servicio.</p>
  </div>

  <!-- Card -->
  <div class="bg-white border border-[#e8edf1] rounded-2xl shadow-md">
    <div class="p-5">
      <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <!-- Nombre / Lugar -->
        <div class="grid md:grid-cols-2 gap-4">
          <div class="flex flex-col gap-1">
            <label for="nombre" class="text-sm font-semibold">Nombre</label>
            <input
              id="nombre"
              type="text"
              maxlength="120"
              placeholder="Ej. Spa & Wellness"
              formControlName="nombre"
              class="w-full px-3 py-2 border border-[#e8edf1] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#cfa15a]"
              [class.border-red-400]="form.get('nombre')?.invalid && form.get('nombre')?.touched"
            />
            <div
              *ngIf="form.get('nombre')?.invalid && form.get('nombre')?.touched"
              class="text-red-700 text-xs"
            >
              Nombre requerido
            </div>
          </div>

          <div class="flex flex-col gap-1">
            <label for="lugar" class="text-sm font-semibold">Lugar</label>
            <input
              id="lugar"
              type="text"
              maxlength="120"
              placeholder="Ej. Torre principal – Piso 2"
              formControlName="lugar"
              class="w-full px-3 py-2 border border-[#e8edf1] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#cfa15a]"
              [class.border-red-400]="form.get('lugar')?.invalid && form.get('lugar')?.touched"
            />
          </div>
        </div>

        <!-- URL de Imagen -->
        <div class="flex flex-col gap-1 mt-4">
          <label for="imagenUrl" class="text-sm font-semibold">URL de Imagen</label>
          <input
            id="imagenUrl"
            type="url"
            maxlength="500"
            placeholder="https://ejemplo.com/imagen.jpg"
            formControlName="imagenUrl"
            (input)="updateImagePreview($event.target.value)"
            class="w-full px-3 py-2 border border-[#e8edf1] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#cfa15a]"
          />
          <div class="text-xs text-slate-500">
            Ingresa la URL de la imagen principal para este servicio.
          </div>
        </div>

        <!-- Vista Previa de Imagen -->
        <div
          id="imagePreview"
          class="preview-image mt-4"
          [class.show]="form.get('imagenUrl')?.value"
        >
          <p class="text-sm font-semibold mb-2">Vista previa:</p>
          <img
            [src]="form.get('imagenUrl')?.value"
            alt="Vista previa de la imagen"
            class="max-w-full max-h-48 rounded-lg border border-[#e8edf1]"
          />
        </div>

        <!-- Descripción -->
        <div class="flex flex-col gap-1 mt-4">
          <label for="descripcion" class="text-sm font-semibold">Descripción</label>
          <textarea
            id="descripcion"
            formControlName="descripcion"
            placeholder="Describe la experiencia, condiciones, etc."
            class="w-full min-h-[120px] resize-y px-3 py-2 border border-[#e8edf1] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#cfa15a]"
          ></textarea>
        </div>

        <!-- Precio / Duración -->
        <div class="grid md:grid-cols-2 gap-4 mt-4">
          <div class="flex flex-col gap-1">
            <label for="precioPorPersona" class="text-sm font-semibold">
              Precio por persona (COP)
            </label>
            <input
              id="precioPorPersona"
              type="number"
              min="0"
              step="0.01"
              placeholder="0.00"
              formControlName="precioPorPersona"
              class="w-full px-3 py-2 border border-[#e8edf1] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#cfa15a]"
            />
            <div class="text-xs text-slate-500">Ingresa el valor en pesos colombianos.</div>
          </div>

          <div class="flex flex-col gap-1">
            <label for="duracionMinutos" class="text-sm font-semibold"> Duración (minutos) </label>
            <input
              id="duracionMinutos"
              type="number"
              min="0"
              step="1"
              placeholder="Ej. 90"
              formControlName="duracionMinutos"
              class="w-full px-3 py-2 border border-[#e8edf1] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#cfa15a]"
            />
          </div>
        </div>

        <!-- Capacidad -->
        <div class="grid md:grid-cols-2 gap-4 mt-4">
          <div class="flex flex-col gap-1">
            <label for="capacidadMaxima" class="text-sm font-semibold"> Capacidad máxima </label>
            <input
              id="capacidadMaxima"
              type="number"
              min="1"
              step="1"
              placeholder="Ej. 8"
              formControlName="capacidadMaxima"
              class="w-full px-3 py-2 border border-[#e8edf1] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#cfa15a]"
            />
            <div class="text-xs text-slate-500">Opcional. Déjalo vacío si no aplica.</div>
          </div>
        </div>

        <!-- Nota sobre imágenes -->
        <div class="mt-4 text-sm text-slate-500">
          Las <strong>imágenes adicionales</strong> se gestionan desde su módulo (lista/galería). En
          la lista se muestra la primera imagen.
        </div>

        <!-- Botones -->
        <div class="flex justify-end gap-3 mt-6 pt-4 border-t border-[#e8edf1]">
          <a
            routerLink="/servicios"
            class="inline-flex items-center px-4 py-2 border border-[#e8edf1] rounded-xl font-semibold hover:bg-gray-50"
          >
            Cancelar
          </a>
          <button
            type="submit"
            [disabled]="saving"
            class="inline-flex items-center px-4 py-2 rounded-xl font-semibold text-white bg-[#cfa15a] hover:bg-[#b88e4e] shadow"
          >
            {{ isEdit ? 'Guardar cambios' : 'Crear servicio' }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <div class="h-6"></div>
</main>
